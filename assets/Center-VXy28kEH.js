import{B as C,E as G,L as B,F as V,S as D,e as W,_ as j,a as J,V as $,b as K}from"./OrbitControls-D25Q7_bD.js";import{r as g}from"./index-Cp2v5T75.js";const Q=e=>typeof e=="object"&&typeof e.then=="function",z=[];function R(e,t,n=(o,i)=>o===i){if(e===t)return!0;if(!e||!t)return!1;const o=e.length;if(t.length!==o)return!1;for(let i=0;i<o;i++)if(!n(e[i],t[i]))return!1;return!0}function H(e,t=null,n=!1,o={}){t===null&&(t=[e]);for(const r of z)if(R(t,r.keys,r.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return o.lifespan&&o.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,o.lifespan)),r.response;if(!n)throw r.promise}const i={keys:t,equal:o.equal,remove:()=>{const r=z.indexOf(i);r!==-1&&z.splice(r,1)},promise:(Q(e)?e:e(...t)).then(r=>{i.response=r,o.lifespan&&o.lifespan>0&&(i.timeout=setTimeout(i.remove,o.lifespan))}).catch(r=>i.error=r)};if(z.push(i),!n)throw i.promise}const U=(e,t,n)=>H(e,t,!1,n),Z=(e,t,n)=>void H(e,t,!0,n),k=e=>{if(e===void 0||e.length===0)z.splice(0,z.length);else{const t=z.find(n=>R(e,n.keys,n.equal));t&&t.remove()}};function X(e,t=1e-4){t=Math.max(t,Number.EPSILON);const n={},o=e.getIndex(),i=e.getAttribute("position"),r=o?o.count:i.count;let l=0;const a=Object.keys(e.attributes),p={},f={},d=[],y=["getX","getY","getZ","getW"];for(let s=0,c=a.length;s<c;s++){const u=a[s];p[u]=[];const h=e.morphAttributes[u];h&&(f[u]=new Array(h.length).fill(0).map(()=>[]))}const x=Math.log10(1/t),T=Math.pow(10,x);for(let s=0;s<r;s++){const c=o?o.getX(s):s;let u="";for(let h=0,S=a.length;h<S;h++){const m=a[h],b=e.getAttribute(m),w=b.itemSize;for(let I=0;I<w;I++)u+=`${~~(b[y[I]](c)*T)},`}if(u in n)d.push(n[u]);else{for(let h=0,S=a.length;h<S;h++){const m=a[h],b=e.getAttribute(m),w=e.morphAttributes[m],I=b.itemSize,E=p[m],M=f[m];for(let v=0;v<I;v++){const O=y[v];if(E.push(b[O](c)),w)for(let F=0,N=w.length;F<N;F++)M[F].push(w[F][O](c))}}n[u]=l,d.push(l),l++}}const A=e.clone();for(let s=0,c=a.length;s<c;s++){const u=a[s],h=e.getAttribute(u),S=new h.array.constructor(p[u]),m=new C(S,h.itemSize,h.normalized);if(A.setAttribute(u,m),u in f)for(let b=0;b<f[u].length;b++){const w=e.morphAttributes[u][b],I=new w.array.constructor(f[u][b]),E=new C(I,w.itemSize,w.normalized);A.morphAttributes[u][b]=E}}return A.setIndex(d),A}class Y extends G{constructor(t,n={}){const{bevelEnabled:o=!1,bevelSize:i=8,bevelThickness:r=10,font:l,height:a=50,size:p=100,lineHeight:f=1,letterSpacing:d=0,...y}=n;if(l===void 0)super();else{const x=l.generateShapes(t,p,{lineHeight:f,letterSpacing:d});super(x,{...y,bevelEnabled:o,bevelSize:i,bevelThickness:r,depth:a})}this.type="TextGeometry"}}var tt=Object.defineProperty,et=(e,t,n)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P=(e,t,n)=>(et(e,typeof t!="symbol"?t+"":t,n),n);class nt extends B{constructor(t){super(t)}load(t,n,o,i){const r=new V(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,l=>{if(typeof l!="string")throw new Error("unsupported data type");const a=JSON.parse(l),p=this.parse(a);n&&n(p)},o,i)}loadAsync(t,n){return super.loadAsync(t,n)}parse(t){return new rt(t)}}class rt{constructor(t){P(this,"data"),P(this,"isFont",!0),P(this,"type","Font"),this.data=t}generateShapes(t,n=100,o){const i=[],r={letterSpacing:0,lineHeight:1,...o},l=ot(t,n,this.data,r);for(let a=0,p=l.length;a<p;a++)Array.prototype.push.apply(i,l[a].toShapes(!1));return i}}function ot(e,t,n,o){const i=Array.from(e),r=t/n.resolution,l=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,a=[];let p=0,f=0;for(let d=0;d<i.length;d++){const y=i[d];if(y===`
`)p=0,f-=l*o.lineHeight;else{const x=st(y,r,p,f,n);x&&(p+=x.offsetX+o.letterSpacing,a.push(x.path))}}return a}function st(e,t,n,o,i){const r=i.glyphs[e]||i.glyphs["?"];if(!r){console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");return}const l=new D;let a,p,f,d,y,x,T,A;if(r.o){const s=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let c=0,u=s.length;c<u;)switch(s[c++]){case"m":a=parseInt(s[c++])*t+n,p=parseInt(s[c++])*t+o,l.moveTo(a,p);break;case"l":a=parseInt(s[c++])*t+n,p=parseInt(s[c++])*t+o,l.lineTo(a,p);break;case"q":f=parseInt(s[c++])*t+n,d=parseInt(s[c++])*t+o,y=parseInt(s[c++])*t+n,x=parseInt(s[c++])*t+o,l.quadraticCurveTo(y,x,f,d);break;case"b":f=parseInt(s[c++])*t+n,d=parseInt(s[c++])*t+o,y=parseInt(s[c++])*t+n,x=parseInt(s[c++])*t+o,T=parseInt(s[c++])*t+n,A=parseInt(s[c++])*t+o,l.bezierCurveTo(y,x,T,A,f,d);break}}return{offsetX:r.ha*t,path:l}}let _=null;async function it(e){return typeof e=="string"?await(await fetch(e)).json():e}function at(e){return _||(_=new nt),_.parse(e)}async function L(e){const t=await it(e);return at(t)}function q(e){return U(L,[e])}q.preload=e=>Z(L,[e]);q.clear=e=>k([e]);const ct=["string","number"],ut=e=>{let t="";const n=[];return g.Children.forEach(e,o=>{ct.includes(typeof o)?t+=o+"":n.push(o)}),[t,...n]},ht=g.forwardRef(({font:e,letterSpacing:t=0,lineHeight:n=1,size:o=1,height:i=.2,bevelThickness:r=.1,bevelSize:l=.01,bevelEnabled:a=!1,bevelOffset:p=0,bevelSegments:f=4,curveSegments:d=8,smooth:y,children:x,...T},A)=>{g.useMemo(()=>W({RenamedTextGeometry:Y}),[]);const s=g.useRef(null),c=q(e),u=g.useMemo(()=>({font:c,size:o,height:i,bevelThickness:r,bevelSize:l,bevelEnabled:a,bevelSegments:f,bevelOffset:p,curveSegments:d,letterSpacing:t,lineHeight:n}),[c,o,i,r,l,a,f,p,d,t,n]),[h,...S]=g.useMemo(()=>ut(x),[x]),m=g.useMemo(()=>[h,u],[h,u]);return g.useLayoutEffect(()=>{y&&(s.current.geometry=X(s.current.geometry,y),s.current.geometry.computeVertexNormals())},[m,y]),g.useImperativeHandle(A,()=>s.current,[]),g.createElement("mesh",j({},T,{ref:s}),g.createElement("renamedTextGeometry",{args:m}),S)}),ft=g.forwardRef(function({children:t,disable:n,disableX:o,disableY:i,disableZ:r,left:l,right:a,top:p,bottom:f,front:d,back:y,onCentered:x,precise:T=!0,cacheKey:A=0,...s},c){const u=g.useRef(null),h=g.useRef(null),S=g.useRef(null);return g.useLayoutEffect(()=>{h.current.matrixWorld.identity();const m=new J().setFromObject(S.current,T),b=new $,w=new K,I=m.max.x-m.min.x,E=m.max.y-m.min.y,M=m.max.z-m.min.z;m.getCenter(b),m.getBoundingSphere(w);const v=p?E/2:f?-E/2:0,O=l?-I/2:a?I/2:0,F=d?M/2:y?-M/2:0;h.current.position.set(n||o?0:-b.x+O,n||i?0:-b.y+v,n||r?0:-b.z+F),typeof x<"u"&&x({parent:u.current.parent,container:u.current,width:I,height:E,depth:M,boundingBox:m,boundingSphere:w,center:b,verticalAlignment:v,horizontalAlignment:O,depthAlignment:F})},[A,x,p,l,d,n,o,i,r,T,a,f,y]),g.useImperativeHandle(c,()=>u.current,[]),g.createElement("group",j({ref:u},s),g.createElement("group",{ref:h},g.createElement("group",{ref:S},t)))});export{ft as C,ht as T};
